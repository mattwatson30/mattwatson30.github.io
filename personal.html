<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Technical Projects — Matthew Watson</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
  <!-- Font Awesome for Toggle Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* --- Global Styles --- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
        --primary-blue: #0000FF; --text-primary: #212529; --text-secondary: #6c757d;
        --background: #f8f9fa; --card-background: #ffffff; --border-color: #dee2e6;
        --border-light: #e9ecef;
    }
    body {
      font-family: 'Montserrat', sans-serif;
      background-color: var(--background);
      color: var(--text-primary);
      line-height: 1.6;
      padding: 40px 20px;
      font-weight: 300;
    }

    /* --- Links & Headers --- */
    a {
      color: var(--primary-blue);
      text-decoration: none;
      font-weight: 500;
      transition: opacity 0.2s ease;
    }
    a:hover {
      text-decoration: none;
      opacity: 0.7;
    }
    header, footer {
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
    }
    header { margin-bottom: 60px; }
    h1 { font-weight: 600; font-size: 2.5rem; letter-spacing: 2px; }
    h3 { font-weight: 500; margin-bottom: 10px; font-size: 1.3rem; }

    /* --- Layout & Cards --- */
    .back-link {
      font-size: 1rem;
      color: var(--text-secondary);
      text-decoration: none;
      display: inline-block;
      margin-top: 15px;
      transition: color 0.2s ease;
    }
    .back-link:hover { color: var(--primary-blue); opacity: 1; }
    
    .projects {
      display: grid;
      grid-template-columns: 1fr; 
      gap: 35px;
      max-width: 900px; 
      margin: 0 auto;
    }
    
    .card {
      background: var(--card-background);
      border: 1px solid var(--border-color);
      padding: 20px;
      border-radius: 14px;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.06);
    }
    .card:hover {
      box-shadow: 0 6px 20px rgba(0, 0, 255, 0.1);
    }
    
    .meta { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 15px; font-style: italic; }
    .card p { margin-bottom: 10px; color: #495057; }
    .card strong { color: var(--primary-blue); font-weight: 600; display: block; margin-bottom: 5px; }
    .links { margin-top: auto; }

    .card p a {
      color: var(--text-primary);
      font-weight: 400;
      text-decoration: underline;
      transition: color 0.2s ease, opacity 0.2s ease;
    }
    .card p a:hover {
      color: var(--primary-blue);
      opacity: 1;
      text-decoration: underline;
    }

    /* --- DESCRIPTION TOGGLE STYLES --- */
    .description-wrapper {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.6s ease-in-out, opacity 0.4s ease-in-out;
        opacity: 0;
    }
    .card.expanded .description-wrapper {
        max-height: 5000px; 
        opacity: 1;
    }
    
    .toggle-bar {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        padding: 12px;
        margin-top: 15px;
        background-color: #f8f9fa;
        border-radius: 8px;
        cursor: pointer;
        color: var(--primary-blue);
        font-weight: 500;
        transition: background-color 0.2s ease;
        user-select: none;
    }
    .toggle-bar:hover {
        background-color: #e9ecef;
    }
    .toggle-icon {
        margin-left: 8px;
        transition: transform 0.3s ease;
    }
    .card.expanded .toggle-icon {
        transform: rotate(180deg);
    }

    /* --- Slideshow Styles --- */
    .slideshow-container { 
        position: relative; 
        max-width: 100%; 
        margin-bottom: 15px;
        overflow: hidden; 
        border-radius: 12px;
        background-color: #ffffff; 
    }
    .slide { display: none; width: 100%; animation: fadeEffect 0.8s ease; }
    
    /* Fixed Image Styling - Matched to 550px like brother's site */
    .slide img { 
        display: block; 
        width: 100%; 
        height: 550px; 
        object-fit: contain; 
        object-position: center;
        background-color: #ffffff;
    }
    
    .slide.active { display: block; }
    @keyframes fadeEffect { from { opacity: 0.4; } to { opacity: 1; } }
    
    .prev, .next { 
        cursor: pointer; 
        position: absolute; 
        top: 50%; 
        transform: translateY(-50%); 
        width: auto; 
        padding: 16px; 
        color: #333; 
        font-weight: bold; 
        font-size: 20px; 
        background-color: rgba(255, 255, 255, 0.5); 
        border-radius: 0 3px 3px 0; 
        user-select: none; 
        transition: background-color 0.3s ease; 
    }
    .next { right: 0; border-radius: 3px 0 0 3px; }
    .prev:hover, .next:hover { background-color: rgba(255, 255, 255, 0.8); }

    /* --- Caption Styles --- */
    .caption-container { 
        text-align: center; 
        padding: 10px 0 5px 0; 
        color: var(--text-secondary); 
        font-size: 0.9rem; 
        min-height: 1.5em; 
        font-style: italic; 
        transition: opacity 0.15s ease-in-out; 
    }

    /* --- Footer --- */
    footer {
      margin-top: 80px;
      padding-top: 40px;
      border-top: 1px solid var(--border-color);
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
    footer p:first-child a { margin: 0 10px; }

    /* --- Responsive Adjustments --- */
    @media (max-width: 768px) {
        .prev, .next { font-size: 16px; padding: 12px; }
        .slide img { height: 350px; }
    }
  </style>
</head>
<body>

  <header>
    <h1>Technical Projects</h1>
    <a href="index.html" class="back-link">&larr; Back to Home</a>
  </header>

  <section class="projects">

    <!-- === PROJECT 1: ROBOTICS COMPETITION === -->
    <article class="card" data-project-id="robotics-comp"> 
      <div class="slideshow-container">
        <!-- Slide 1: Hero Shot -->
        <div class="slide active">
            <img src="images/dalhousie_robotics_competition.png" alt="1st Place Winning Robot Design" onerror="this.src='https://placehold.co/800x550?text=Winning+Robot'">
        </div>
        <!-- Slide 2: RViz (Technical) -->
        <div class="slide">
            <img src="images/RViz.png" alt="ROS2 Nav2 Path Planning Visualization in RViz" onerror="this.src='https://placehold.co/800x550?text=RViz+Visualization'">
        </div>
        <!-- Slide 3: Close Up (Hardware) -->
        <div class="slide">
            <img src="images/robot.png" alt="Hardware Integration Close-Up" onerror="this.src='https://placehold.co/800x550?text=Robot+Close-Up'">
        </div>
        
        <a class="prev" onclick="manualSlideChange('robotics-comp', -1)">&#10094;</a>
        <a class="next" onclick="manualSlideChange('robotics-comp', 1)">&#10095;</a>
      </div>
      
      <!-- ADDED CAPTION CONTAINER (Matches Brother's Layout) -->
      <div class="caption-container">1st Place Winning Robot, Pictured During Competition</div>
      
      <h3>Autonomous Navigation Robot (1st Place Winner)</h3>
      <p class="meta">Skills: ROS2 (Nav2), Python/C++, Arduino, PWM Hardware Design, Linux/Bash</p>
      
      <div class="toggle-bar" onclick="toggleDescription(this)">
          <span>View Details</span>
          <i class="fas fa-chevron-down toggle-icon"></i>
      </div>

      <div class="description-wrapper">
          <div style="padding-top: 20px;">
          <div style="padding-top: 20px;">
              <p><strong>Challenge:</strong> To design an autonomous robot capable of navigating a dynamic obstacle course and 
                collecting LED targets faster than 28 other teams. The robot had to autonomously identify team-specific frequencies 
                (80Hz vs 40Hz), navigate via waypoints, and return home within a strict 5-minute window.</p>
              <p><strong>My Solution:</strong> I engineered a full-stack robotic system using <b>Python, C++, and C</b>. 
                On the hardware side, I integrated <b>LiDAR and Ultrasonic sensors</b> for real-time obstacle detection and designed a 
                custom PWM LED driver circuit controlled by an Arduino. For software, I implemented the <b>ROS2 Nav2 stack</b>, 
                optimizing global costmap parameters to enable tighter path planning. I wrote custom <b>Bash scripts</b> to automate the 
                startup sequence, ensuring the hardware nodes and navigation stack launched instantly upon boot.</p>
              <p><strong>Results:</strong> Our robot achieved a <b>97.5% collection rate</b> (117/120) and placed <b>1st out of 
                29 teams</b>. We executed a consistent strategy, scoring an average of 34.5 points per run (well above the 25-point requirement) 
                and never conceded a single loss throughout the competition.</p>
          </div>
      </div>
    </article>

    <!-- === PROJECT 2: CPU EMULATOR === -->
    <article class="card" data-project-id="cpu-emulator"> 
      <div class="slideshow-container">
        <div class="slide active"><img src="images/cpu-architecture.png" alt="4-Stage Pipeline Architecture Diagram" onerror="this.src='https://placehold.co/800x550?text=CPU+Architecture'"></div>
        <div class="slide"><img src="images/debugger-ui.png" alt="Custom Debugger Interface" onerror="this.src='https://placehold.co/800x550?text=Debugger+UI'"></div>
        <a class="prev" onclick="manualSlideChange('cpu-emulator', -1)">&#10094;</a>
        <a class="next" onclick="manualSlideChange('cpu-emulator', 1)">&#10095;</a>
      </div>
      
      <div class="caption-container">4-Stage Pipeline Architecture Diagram</div>
      
      <h3>4-Stage Pipelined RISC CPU Emulator</h3>
      <p class="meta">Skills: C, Computer Architecture, Assembly Language</p>
      
      <div class="toggle-bar" onclick="toggleDescription(this)">
          <span>View Details</span>
          <i class="fas fa-chevron-down toggle-icon"></i>
      </div>

      <div class="description-wrapper">
          <div style="padding-top: 20px;">
              <p><strong>Challenge:</strong> To understand the low-level operation of a processor by building a functional emulator from scratch. The goal was to execute compiled S-Record files on a custom RISC architecture.</p>
              <p><strong>My Solution:</strong> I architected a <b>4-stage pipelined CPU emulator</b> in C. The system simulates a <b>Harvard Architecture</b> (separate instruction and data memory) and supports a custom 16-bit instruction set. I implemented a full fetch-decode-execute-writeback cycle, handling data hazards and control hazards. I also built a robust <b>debugger</b> that allows users to single-step through assembly code, inspect registers, and view memory contents in real-time.</p>
              <p><strong>Results:</strong> The emulator successfully executes complex assembly programs compiled with a custom compiler. It serves as a powerful educational tool for visualizing how pipelining improves processor throughput.</p>
          </div>
      </div>
    </article>

    <!-- === PROJECT 3: OS SCHEDULER === -->
    <article class="card" data-project-id="os-scheduler"> 
      <div class="slideshow-container">
        <div class="slide active"><img src="images/os-scheduler-diagram.png" alt="Process Scheduling Logic" onerror="this.src='https://placehold.co/800x550?text=Scheduler+Logic'"></div>
        <a class="prev" onclick="manualSlideChange('os-scheduler', -1)">&#10094;</a>
        <a class="next" onclick="manualSlideChange('os-scheduler', 1)">&#10095;</a>
      </div>
      
      <div class="caption-container">Process Scheduling Logic</div>
      
      <h3>Operating System Process Scheduler</h3>
      <p class="meta">Skills: C, Multithreading, Algorithms</p>
      
      <div class="toggle-bar" onclick="toggleDescription(this)">
          <span>View Details</span>
          <i class="fas fa-chevron-down toggle-icon"></i>
      </div>

      <div class="description-wrapper">
          <div style="padding-top: 20px;">
              <p><strong>Challenge:</strong> To implement the core logic of an Operating System scheduler capable of managing multiple processes and threads simultaneously. The assignment required handling complex state transitions (Ready, Running, Blocked) without any external libraries.</p>
              <p><strong>My Solution:</strong> I wrote a complete process scheduler in C from scratch. The system parses a configuration file defining various processes (loops, I/O operations) and simulates their execution using a <b>Round Robin</b> algorithm with priority queues. I implemented full context switching logic, managing the saving and restoring of thread states.</p>
              <p><strong>Results:</strong> I was the <b>only student in the class</b> to complete the entire scheduler without using provided starter code or external libraries. The final system successfully handles concurrent process execution, demonstrating deadlock avoidance and efficient CPU utilization.</p>
          </div>
      </div>
    </article>
    
  </section>

  <footer>
    <p>
      <a href="images/resume.pdf" target="_blank"> Download Resume</a> ·
      <a href="mailto:matthewwatson311@gmail.com">Email Me</a> ·
      <a href="https://linkedin.com/in/matthewwatson311" target="_blank">LinkedIn</a>
    </p>
    <p>© 2026 Matthew Watson</p>
  </footer>

  <script>
    // --- TOGGLE LOGIC ---
    function toggleDescription(btn) {
        const card = btn.closest('.card');
        const textSpan = btn.querySelector('span');
        
        // Toggle class
        card.classList.toggle('expanded');
        
        // Update text
        if (card.classList.contains('expanded')) {
            textSpan.textContent = "Hide Details";
        } else {
            textSpan.textContent = "View Details";
        }
    }

    // --- SLIDESHOW LOGIC ---
    const slideshowData = {};

    function initializeSlideshow(projectId) {
        if (!slideshowData[projectId]) {
            const projectItem = document.querySelector(`.card[data-project-id="${projectId}"]`);
            if (!projectItem) return; 
            const slides = projectItem.querySelectorAll('.slide');
            const captions = Array.from(slides).map(slide => slide.querySelector('img').alt || '');
            slideshowData[projectId] = {
                slideIndex: 0, 
                slides: slides, 
                captions: captions, 
                timer: null,
                captionElement: projectItem.querySelector('.caption-container')
            };
        }
    }

    function showSlide(projectId, index) {
        initializeSlideshow(projectId);
        const data = slideshowData[projectId];
        if (!data || !data.slides || data.slides.length === 0) return;
        
        if (index >= data.slides.length) { index = 0; }
        if (index < 0) { index = data.slides.length - 1; }
        
        data.slides.forEach(slide => slide.classList.remove('active'));
        data.slides[index].classList.add('active');
        data.slideIndex = index;
        
        if (data.captionElement) {
            data.captionElement.style.opacity = 0;
            setTimeout(() => {
                data.captionElement.textContent = data.captions[index] || '';
                data.captionElement.style.opacity = 1;
            }, 150);
        }
    }

    function manualSlideChange(projectId, n) {
        initializeSlideshow(projectId);
        const data = slideshowData[projectId];
        if (!data) return;
        stopAutoSlide(projectId);
        showSlide(projectId, data.slideIndex + n);
        setTimeout(() => startAutoSlide(projectId), 8000); 
    }

    function startAutoSlide(projectId) {
        initializeSlideshow(projectId);
        const data = slideshowData[projectId];
        if (!data || data.slides.length <= 1) return;
        stopAutoSlide(projectId); 
        data.timer = setInterval(() => {
            showSlide(projectId, data.slideIndex + 1);
        }, 5000);
    }

    function stopAutoSlide(projectId) {
        if (slideshowData[projectId] && slideshowData[projectId].timer) {
            clearInterval(slideshowData[projectId].timer);
            slideshowData[projectId].timer = null;
        }
    }

    // --- INITIALIZATION & DEEP LINKING ---
    document.addEventListener('DOMContentLoaded', () => {
        // 1. Init all slideshows
        const projectCards = document.querySelectorAll('.card[data-project-id]');
        projectCards.forEach(card => {
            const projectId = card.dataset.projectId;
            initializeSlideshow(projectId);
            showSlide(projectId, 0); 
            startAutoSlide(projectId);
        });

        // 2. Check URL Hash for Deep Linking (e.g., #robot-hand-project)
        const hash = window.location.hash.substring(1); // Get ID without '#'
        if (hash) {
            const targetCard = document.querySelector(`.card[data-project-id="${hash}"]`);
            if (targetCard) {
                // Expand the card
                const toggleBtn = targetCard.querySelector('.toggle-bar');
                if (toggleBtn) {
                    toggleDescription(toggleBtn);
                }
                // Smooth scroll to it after a brief delay
                setTimeout(() => {
                    targetCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 500);
            }
        }
    });
  </script>

</body>
</html>
